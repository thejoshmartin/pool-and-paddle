# Pool & Paddle â€” Luxury STR Command Center

A web dashboard for launching and managing your luxury Airbnb property, featuring:
- **Dashboard** â€” Progress tracking across 9 categories with executive summary
- **Podcast Intel Database** â€” 517 AI-processed episodes from "Thanks for Visiting," searchable by keyword, tags, category, and priority
- **Task Tracker** â€” Asana-style task rows with assignees (JM/KM), due dates, notes, and localStorage persistence

Live at: [pool-and-paddle.vercel.app](https://pool-and-paddle.vercel.app) (auto-deploys on push)

---

## Project Structure

```
pool-and-paddle/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.jsx              # Main app (Dashboard, Podcast Intel, Task Tracker)
â”‚   â”œâ”€â”€ podcast-data.json    # 517 processed episodes (generated by script)
â”‚   â””â”€â”€ main.jsx             # React entry point
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ fetch-episodes.js    # Episode fetcher + Claude AI processor
â”‚   â”œâ”€â”€ raw-episodes.json    # Cached WordPress API data (549 episodes)
â”‚   â””â”€â”€ processed-episodes.json  # Claude-processed output (517 episodes)
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.js
â””â”€â”€ .gitignore
```

---

## Local Development

```bash
npm install
npm run dev
# Open http://localhost:5173
```

---

## Deploying Updates

Every push to `main` triggers an auto-deploy on Vercel.

```bash
git add src/podcast-data.json src/App.jsx
git commit -m "Description of changes"
git push
```

---

## Updating Podcast Episodes

The podcast pipeline has two phases. Phase 1 fetches raw data from the Thanks for Visiting WordPress API (free, no key needed). Phase 2 processes new episodes through Claude's API to generate structured summaries, tags, categories, and priority ratings.

### Prerequisites

- Node.js 18+
- An [Anthropic API key](https://console.anthropic.com/settings/keys) (for Phase 2 only)

### Step-by-Step: Fetch & Process New Episodes

```bash
# 1. Delete the cached raw data to force a fresh fetch from WordPress
rm scripts/raw-episodes.json

# 2. Run Phase 1 (fetch) + Phase 2 (AI processing)
#    The script is INCREMENTAL â€” it skips episodes already in processed-episodes.json
ANTHROPIC_API_KEY=sk-ant-your-key-here node scripts/fetch-episodes.js

# 3. Copy the processed data into the app
cp scripts/processed-episodes.json src/podcast-data.json

# 4. Test locally
npm run dev

# 5. Deploy
git add src/podcast-data.json scripts/processed-episodes.json
git commit -m "Update podcast database with new episodes"
git push
```

### How Incremental Processing Works

- `scripts/raw-episodes.json` â€” cached WordPress API response. Delete to re-fetch.
- `scripts/processed-episodes.json` â€” all Claude-processed episodes. The script reads this file on startup and **skips any episode numbers already present**. Only new episodes are sent to the API.
- Running the script twice costs nothing for already-processed episodes.

### Cost Estimate

- Phase 1 (fetch): Free
- Phase 2 (process): ~$0.01-0.02 per episode using Claude Sonnet
- Full re-process of all 517 episodes: ~$5
- Monthly update of 4-5 new episodes: ~$0.05

---

## Automated Monthly Updates (GitHub Actions)

To automatically check for new episodes on the 1st of each month, create `.github/workflows/update-episodes.yml`:

```yaml
name: Update Podcast Episodes

on:
  schedule:
    - cron: '0 9 1 * *'  # 9am UTC on the 1st of each month
  workflow_dispatch:       # Also allow manual trigger

jobs:
  update:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: '20'

      - run: npm install

      - name: Fetch & process new episodes
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        run: |
          rm -f scripts/raw-episodes.json
          node scripts/fetch-episodes.js

      - name: Update app data
        run: cp scripts/processed-episodes.json src/podcast-data.json

      - name: Commit and push if changed
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git diff --quiet src/podcast-data.json && echo "No new episodes" && exit 0
          git add src/podcast-data.json scripts/processed-episodes.json scripts/raw-episodes.json
          git commit -m "Auto-update: new podcast episodes $(date +%Y-%m)"
          git push
```

### Setup for GitHub Actions

1. Go to your repo: **Settings > Secrets and variables > Actions**
2. Click **New repository secret**
3. Name: `ANTHROPIC_API_KEY`
4. Value: your Anthropic API key
5. The workflow runs automatically on the 1st of each month, or manually via **Actions > Update Podcast Episodes > Run workflow**

---

## Customizing the App

### Adding Tasks Manually

Find the `DEFAULT_TASKS` array in `src/App.jsx` and add:

```javascript
{
  id: "t56",
  category: "design",         // Must match a TASK_CATEGORIES id
  task: "Your task description",
  done: false,
  priority: "high",           // critical | high | medium | low
  isGimmick: false,
  notes: "",
  relatedEps: [531, 249]      // Episode numbers for reference links
}
```

New fields on every task: `assignee` (null | "JM" | "KM"), `dueDate` (null | "YYYY-MM-DD"), `completedDate` (null | "YYYY-MM-DD"), `userCreated` (boolean).

### Adding Task Categories

Find `TASK_CATEGORIES` in `src/App.jsx`:

```javascript
{ id: "my-category", label: "My New Category", icon: "ðŸŽ¯" }
```

### Resetting Task Progress

Task progress is stored in the browser's localStorage under `pool-paddle-tasks-v2`.

- Open browser dev tools (F12) > Application > Local Storage
- Delete the `pool-paddle-tasks-v2` key
- Refresh the page

### Shared Task State

Task data is per-browser (you and KM have independent progress). For shared state, add a backend like Supabase, Firebase, or Google Sheets API.

---

## Troubleshooting

| Problem | Fix |
|---------|-----|
| `npm: command not found` | Install Node.js from https://nodejs.org/ |
| Page is blank after deploy | Check build command is `npm run build`, publish dir is `dist` |
| Fonts look wrong | App loads Plus Jakarta Sans from Google Fonts â€” needs internet |
| Tasks disappeared | localStorage is per-browser. Different browser = fresh state. |
| `Cannot find package '@anthropic-ai/sdk'` | Run `npm install` first |
| Script says "All episodes already processed" | Working as intended â€” no new episodes to process |

---

## Tech Stack

| What | Why |
|------|-----|
| React 18 | Component framework |
| Vite 6 | Fast build tool |
| Vanilla CSS-in-JS | No extra dependencies, everything in one file |
| localStorage | Persistent task state with zero backend |
| Plus Jakarta Sans | Google Font |
| Anthropic Claude API | Episode analysis and categorization |
| WordPress REST API | Episode data source (thanksforvisiting.com) |
